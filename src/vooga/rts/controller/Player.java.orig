package vooga.rts.controller;

import java.awt.geom.Rectangle2D;
import javax.swing.JComponent;
import vooga.rts.manager.Manager;
import vooga.rts.input.ActionObject;
import vooga.rts.input.AlertObject;
import vooga.rts.input.Input;
import vooga.rts.input.PositionObject;
/**
 * At the moment, the player class is implementing the humanplayer. For network
 * player and ai player, some methods will be refactored into a super class
 * 
<<<<<<< HEAD
 * @author Challen Herzberg-Brovold, Jonno Schmidt
=======
 * @author Challen Herzberg-Brovold
>>>>>>> 2646ef6a4f0f46174366747559fcffc90ee51b06
 *
 */
public class Player implements Controller {

<<<<<<< HEAD
=======
    private final static String DEFAULT_INPUT_LOCATION = "vooga.rts.resources.properties.Input";
>>>>>>> 2646ef6a4f0f46174366747559fcffc90ee51b06
    private PositionObject myLeftMouse;
    private Rectangle2D myDrag;
    private Manager myManager;
    
<<<<<<< HEAD
    public Player (Manager manager) {
        myManager = manager;
    }
    
=======
    public Player (Manager manager, JComponent component) {
        myManager = manager;
        Input input = new Input(DEFAULT_INPUT_LOCATION, component);
        input.addListenerTo(this);
    }
    
    
>>>>>>> 2646ef6a4f0f46174366747559fcffc90ee51b06
    public void sendCommand(Command command) {
            myManager.receiveCommand(command);
    }
    
    public void leftMouseDown (PositionObject o) {
        myLeftMouse = o;
    }
    
    public void leftMouseUp (PositionObject o) {
        if (myDrag == null) {            
            sendCommand(new DragCommand("drag", myDrag));
        }
<<<<<<< HEAD
        sendCommand(new LeftClickCommand("leftclick", o));
=======
        sendCommand(new LeftClickCommand("rightclick", o));
>>>>>>> 2646ef6a4f0f46174366747559fcffc90ee51b06
        myLeftMouse = null;
        myDrag = null;
    }
    
    public void mouseDrag (PositionObject o) {
        if (myLeftMouse != null) {
            double uX = o.getX() > myLeftMouse.getX() ? myLeftMouse.getX() : o.getX();
            double uY = o.getY() > myLeftMouse.getY() ? myLeftMouse.getY() : o.getY();            
            double width = Math.abs(o.getX() - myLeftMouse.getX());
            double height = Math.abs(o.getY() - myLeftMouse.getY());
            myDrag = new Rectangle2D.Double(uX, uY, width, height);
        }
    }
}
